---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: ${namespace_name}
resources:
  - gateway.yaml

patches:
  - target:
      kind: Gateways
      name: frontenda
    patch: |-
      apiVersion: gateway.networking.k8s.io/v1
      kind: Gateway
      metadata:
        name: _
      spec:
        listeners:
          - name: http
            port: 80
            protocol: HTTP
            hostname: podinfo.symplectic.internal
            allowedRoutes:
              namespaces:
                from: All
          - name: https
            port: 443
            protocol: HTTPS
            hostname: podinfo.symplectic.internal
            allowedRoutes:
              namespaces:
                from: All
            tls:
              mode: Terminate
              certificateRefs:
                - name: podinfo-cert