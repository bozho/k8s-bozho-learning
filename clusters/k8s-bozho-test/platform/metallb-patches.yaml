---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: metallb-patches
  namespace: flux-system
spec:
  patches:
    - target:
        kind: IPAddressPool
        name: ${pool_name}
        namespace: ${namespace_name:=default}
      patch: |-
        apiVersion: metallb.io/v1beta1
        kind: IPAddressPool
        metadata:
          name: ${pool_name}
          namespace: ${namespace_name:=default}
        spec:
          addresses: []
            - 10.20.30.207/32
            - 10.20.30.208/32
            - 10.20.30.209/32
